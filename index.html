<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ¦åª½åª½çš„æ¯æ—¥é©šå–œ</title>
    <!-- å¼•å…¥ Google Fonts è®“å­—é«”å¥½çœ‹ä¸€é» -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #fdf6e3;
            --card-bg: #fff;
            --primary-color: #d68086; /* æº«æš–çš„è±†æ²™ç´… */
            --text-color: #5d5d5d;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            font-family: 'Noto Serif TC', serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: var(--text-color);
            overflow: hidden; /* é˜²æ­¢æ²å‹• */
        }

        .container {
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            letter-spacing: 2px;
        }

        p.date {
            font-size: 0.9rem;
            color: #999;
            margin-bottom: 2rem;
        }

        /* æ‹ç«‹å¾—ç›¸æ¡†æ¨£å¼ */
        .polaroid-wrapper {
            perspective: 1000px; /* 3D æ•ˆæœè¦–è§’ */
            cursor: pointer;
            width: 100%;
            height: 450px; /* å›ºå®šé«˜åº¦ä¿æŒç‰ˆé¢ç©©å®š */
            position: relative;
        }

        .polaroid-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        /* ç¿»è½‰æ•ˆæœ class */
        .polaroid-inner.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            background-color: var(--card-bg);
            padding: 15px 15px 60px 15px; /* åº•éƒ¨ç•™ç™½çµ¦æ–‡å­— */
            box-sizing: border-box;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* æ­£é¢ (é‚„æ²’ç¿»é–‹æ™‚) */
        .card-front {
            background-color: var(--primary-color);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .card-front h2 {
            font-size: 2rem;
            margin: 0;
        }
        
        .card-front span {
            font-size: 3rem;
            margin-top: 10px;
        }

        .tap-hint {
            margin-top: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
            animation: pulse 1.5s infinite;
        }

        /* èƒŒé¢ (ç¿»é–‹å¾Œ) */
        .card-back {
            transform: rotateY(180deg);
        }

        .photo-container {
            width: 100%;
            height: 100%;
            background-color: #eee;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
        }

        img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
            display: block;
        }

        .caption {
            position: absolute;
            bottom: 15px;
            left: 0;
            width: 100%;
            text-align: center;
            font-family: 'Bradley Hand', 'cwTeXYen', cursive; /* æ‰‹å¯«é¢¨æ ¼å­—é«” */
            font-size: 1.1rem;
            color: #333;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Daily Moment</h1>
        <p class="date" id="display-date">Loading date...</p>

        <div class="polaroid-wrapper" onclick="flipCard()">
            <div class="polaroid-inner" id="card">
                <!-- æ­£é¢ï¼šç¦®ç‰©åŒ…è£ -->
                <div class="card-face card-front">
                    <h2>çµ¦åª½åª½</h2>
                    <span>ğŸ</span>
                    <div class="tap-hint">é»æ“Šæ‰“é–‹ä»Šå¤©çš„ç…§ç‰‡</div>
                </div>

                <!-- èƒŒé¢ï¼šç…§ç‰‡ -->
                <div class="card-face card-back">
                    <div class="photo-container">
                        <img id="daily-photo" src="" alt="æ¯æ—¥ç…§ç‰‡" onload="photoLoaded()" onerror="photoError()">
                    </div>
                    <div class="caption" id="photo-caption">
                        Thinking of you from Taipei â¤ï¸
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function init() {
            const today = new Date();
            
            // 1. è¨­å®šé¡¯ç¤ºçš„æ—¥æœŸæ–‡å­—
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            document.getElementById('display-date').textContent = today.toLocaleDateString('zh-TW', options);

            // 2. æ ¼å¼åŒ–æ—¥æœŸç‚º YYYY-MM-DD ä»¥ä¾¿æŠ“å–ç…§ç‰‡
            // æ³¨æ„ï¼šè¦è™•ç†æ™‚å€å•é¡Œï¼Œé€™è£¡ç°¡å–®ä½¿ç”¨æœ¬åœ°æ™‚é–“
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const dateString = `${year}-${month}-${day}`;

            // 3. è¨­å®šåœ–ç‰‡è·¯å¾‘
            // æˆ‘å€‘å‡è¨­ç…§ç‰‡æ”¾åœ¨ images è³‡æ–™å¤¾ï¼Œä¸¦ä¸”å‘½åç‚º YYYY-MM-DD.jpg
            const photoPath = `images/${dateString}.jpg`;
            
            // åŠ ä¸Šæ™‚é–“æˆ³è¨˜é˜²æ­¢æ‰‹æ©Ÿç€è¦½å™¨å¿«å–èˆŠç…§ç‰‡ (?v=...)
            const img = document.getElementById('daily-photo');
            img.src = `${photoPath}?v=${new Date().getTime()}`;
            
            // é è¨­æ¨™é¡Œ
            document.getElementById('photo-caption').innerText = `${dateString} çš„ç”Ÿæ´»ç´€éŒ„`;
        }

        // ç¿»è½‰å¡ç‰‡æ•ˆæœ
        function flipCard() {
            document.getElementById('card').classList.toggle('flipped');
        }

        // åœ–ç‰‡è¼‰å…¥æˆåŠŸ
        function photoLoaded() {
            console.log("Photo loaded successfully!");
        }

        // åœ–ç‰‡è¼‰å…¥å¤±æ•— (ä»£è¡¨ä»Šå¤©é‚„æ²’ä¸Šå‚³ï¼Œæˆ–æ˜¯æª”åéŒ¯èª¤)
        function photoError() {
            console.log("No photo found for today, showing default.");
            const img = document.getElementById('daily-photo');
            // å¦‚æœç•¶å¤©ç…§ç‰‡æ‰¾ä¸åˆ°ï¼Œé¡¯ç¤ºé è¨­åœ–
            // ç¢ºä¿ä½ æœ‰æ”¾ä¸€å¼µ default.jpg åœ¨ images è³‡æ–™å¤¾
            img.src = 'images/default.jpg'; 
            document.getElementById('photo-caption').innerText = "é‚„æ²’æ”¾å–”!";
            
            // é˜²æ­¢ default.jpg ä¹Ÿæ‰¾ä¸åˆ°é€ æˆç„¡é™è¿´åœˆ
            img.onerror = null; 
        }

        // å•Ÿå‹•ç¨‹å¼
        init();
    </script>
</body>
</html>